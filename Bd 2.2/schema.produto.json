{
  "$jsonSchema": {
    "bsonType": "object",
    "required": ["tipo", "titulo", "preco", "data_lancamento", "generos", "idiomas", "desenvolvedora", "publicadora"],
    "additionalProperties": false,
    "properties": {
      "_id": { "bsonType": "objectId" },
      "tipo": { "enum": ["Jogo", "Software", "DLC"] },
      "titulo": { "bsonType": "string", "maxLength": 100 },
      "preco": { "bsonType": "double", "minimum": 0 },
      "descricao": { "bsonType": "string" },
      "data_lancamento": { "bsonType": "date" },
      "desenvolvedora": { 
        "bsonType": "string",
        "maxLength": 255,
        "description": "Referência para Nome_empresa da coleção Desenvolvedora (cardinalidade 1:N)"
      },
      "publicadora": { 
        "bsonType": "string",
        "maxLength": 255,
        "description": "Referência para Nome_Publicadora da coleção Publicadora (cardinalidade 1:N)"
      },
      "generos": { 
        "bsonType": "array", 
        "items": { "bsonType": "string" },
        "description": "Referências para nomes dos gêneros da coleção Genero (cardinalidade N:M)"
      },
      "idiomas": { "bsonType": "array", "items": { "bsonType": "string" } },
      "especificacoes": {
        "bsonType": "object",
        "properties": {
          "suporte_controle": { "bsonType": "bool" },
          "faixa_etaria": { "bsonType": "string" },
          "versao_software": { "bsonType": "string" },
          "tipo_licenca": { "bsonType": "string" },
          "requer_jogo_base": { "bsonType": "bool" },
          "tamanho_download": { "bsonType": "string" }
        }
      },
      "conquistas": {
        "bsonType": "array",
        "items": {
          "bsonType": "object",
          "required": ["titulo", "descricao", "imagem_icone"],
          "additionalProperties": false,
          "properties": {
            "titulo": { "bsonType": "string" },
            "descricao": { "bsonType": "string" },
            "imagem_icone": { "bsonType": "binData" }
          }
        }
      },
      "requisitos": { "bsonType": "object" }
    },
    "oneOf": [
      {
        "properties": {
          "tipo": { "enum": ["Jogo"] },
          "especificacoes": {
            "required": ["suporte_controle", "faixa_etaria"]
          }
        }
      },
      {
        "properties": {
          "tipo": { "enum": ["Software"] },
          "especificacoes": {
            "required": ["versao_software", "tipo_licenca"]
          }
        }
      },
      {
        "properties": {
          "tipo": { "enum": ["DLC"] },
          "especificacoes": {
            "required": ["requer_jogo_base"]
          }
        }
      }
    ]
  }
}