{
  "$jsonSchema": {
    "bsonType": "object",
    "required": ["id_usuario", "id_produto", "status", "valor_pago", "nota_fiscal"],
    "additionalProperties": false,
    "properties": {
      "_id": { "bsonType": "objectId" },
      "id_usuario": { "bsonType": "objectId" },
      "id_produto": { "bsonType": "objectId" },
      "status": { "bsonType": "string" },
      "metodo_pagamento": { "bsonType": "string" },
      "valor_pago": { "bsonType": "double", "minimum": 0 },
      "data_compra": { "bsonType": "date" },
      "nota_fiscal": {
        "bsonType": "object",
        "required": ["numero_serie", "valor_total"],
        "additionalProperties": false,
        "properties": {
          "numero_serie": { "bsonType": "int" },
          "valor_total": { "bsonType": "double" }
        }
      }
    }
  }
}